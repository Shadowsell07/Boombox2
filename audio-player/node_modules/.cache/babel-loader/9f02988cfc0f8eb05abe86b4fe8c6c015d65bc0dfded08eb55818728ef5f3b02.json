{"ast":null,"code":"// src/services/AudioService.ts\n\nexport class AudioService {\n  constructor() {\n    this.audio = void 0;\n    this.audioContext = null;\n    this.analyser = null;\n    this.dataArray = null;\n    this.audio = new Audio();\n    // Add debug listeners\n    this.audio.addEventListener('loadstart', () => console.log('Loading audio...'));\n    this.audio.addEventListener('canplay', () => console.log('Audio can play'));\n    this.audio.addEventListener('error', e => console.error('Audio error:', e));\n  }\n  async loadTrack(url) {\n    console.log('Loading track:', url);\n    this.audio.src = url;\n    await this.audio.load();\n  }\n  async play() {\n    try {\n      if (!this.audioContext) {\n        this.audioContext = new (window.AudioContext || window.webkitAudioContext)();\n        const source = this.audioContext.createMediaElementSource(this.audio);\n        source.connect(this.audioContext.destination);\n      }\n      await this.audio.play();\n    } catch (error) {\n      console.error('Play failed:', error);\n      throw error;\n    }\n  }\n  pause() {\n    this.audio.pause();\n  }\n  setVolume(level) {\n    console.log('Setting volume to:', level);\n    this.audio.volume = level;\n  }\n  setupAnalyser() {\n    if (!this.audioContext) {\n      this.audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      this.analyser = this.audioContext.createAnalyser();\n      this.analyser.fftSize = 32;\n      const source = this.audioContext.createMediaElementSource(this.audio);\n      source.connect(this.analyser);\n      this.analyser.connect(this.audioContext.destination);\n      this.dataArray = new Uint8Array(this.analyser.frequencyBinCount);\n    }\n  }\n  getAudioData() {\n    if (this.analyser && this.dataArray) {\n      this.analyser.getByteFrequencyData(this.dataArray);\n      return this.dataArray;\n    }\n    return null;\n  }\n}","map":{"version":3,"names":["AudioService","constructor","audio","audioContext","analyser","dataArray","Audio","addEventListener","console","log","e","error","loadTrack","url","src","load","play","window","AudioContext","webkitAudioContext","source","createMediaElementSource","connect","destination","pause","setVolume","level","volume","setupAnalyser","createAnalyser","fftSize","Uint8Array","frequencyBinCount","getAudioData","getByteFrequencyData"],"sources":["/workspaces/Boombox2/audio-player/src/services/AudioService.ts"],"sourcesContent":["// src/services/AudioService.ts\n\nexport class AudioService {\n  private audio: HTMLAudioElement;\n  private audioContext: AudioContext | null = null;\n  private analyser: AnalyserNode | null = null;\n  private dataArray: Uint8Array | null = null;\n\n  constructor() {\n    this.audio = new Audio();\n    // Add debug listeners\n    this.audio.addEventListener('loadstart', () => console.log('Loading audio...'));\n    this.audio.addEventListener('canplay', () => console.log('Audio can play'));\n    this.audio.addEventListener('error', (e) => console.error('Audio error:', e));\n  }\n\n  async loadTrack(url: string) {\n    console.log('Loading track:', url);\n    this.audio.src = url;\n    await this.audio.load();\n  }\n\n  async play() {\n    try {\n      if (!this.audioContext) {\n        this.audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\n        const source = this.audioContext.createMediaElementSource(this.audio);\n        source.connect(this.audioContext.destination);\n      }\n      await this.audio.play();\n    } catch (error) {\n      console.error('Play failed:', error);\n      throw error;\n    }\n  }\n\n  pause() {\n    this.audio.pause();\n  }\n\n  setVolume(level: number) {\n    console.log('Setting volume to:', level);\n    this.audio.volume = level;\n  }\n\n  setupAnalyser() {\n    if (!this.audioContext) {\n      this.audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\n      this.analyser = this.audioContext.createAnalyser();\n      this.analyser.fftSize = 32;\n      const source = this.audioContext.createMediaElementSource(this.audio);\n      source.connect(this.analyser);\n      this.analyser.connect(this.audioContext.destination);\n      this.dataArray = new Uint8Array(this.analyser.frequencyBinCount);\n    }\n  }\n\n  getAudioData() {\n    if (this.analyser && this.dataArray) {\n      this.analyser.getByteFrequencyData(this.dataArray);\n      return this.dataArray;\n    }\n    return null;\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}